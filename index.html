<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Tool Sign-Out Sheet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <h1>Tool Sign-Out Sheet</h1>
    <div class="sub">Track tool usage with QR code or RFID scanning</div>

    <div class="tabs">
      <button id="tabSign" class="tab active" type="button">Sign Out Tool</button>
      <button id="tabHistory" class="tab" type="button">History</button>
    </div>

    <section id="panelSign" class="panel">
      <h2>Sign Out a Tool</h2>
      <p class="muted">Scan or manually enter tool information.</p>

      <div class="modes">
        <button id="modeQR" class="mode active" type="button">QR Code</button>
        <button id="modeRFID" class="mode" type="button">RFID</button>
        <button id="modeManual" class="mode" type="button">Manual</button>
      </div>

      <div class="bar" id="actionBar">
        <span class="icon">ðŸ“·</span>
        <span id="barText">Start QR Scanner</span>
      </div>

      <form id="signForm" class="grid">
        <div>
          <label>Tool Identifier (or enter manually)</label>
          <input id="fIdent" type="text" placeholder="Enter tool ID, QR code, or RFID tag" autocomplete="off" />
        </div>

        <div class="grid two">
          <div>
            <label>Date</label>
            <input id="fDate" type="date" />
          </div>
          <div>
            <label>User Initials (2-4 letters)</label>
            <input id="fInit" type="text" placeholder="AB" maxlength="4" />
          </div>
        </div>

        <div>
          <label>Job Number (optional, format: P-#####)</label>
          <input id="fJob" type="text" placeholder="P-12345" />
        </div>

        <div class="grid two">
          <div>
            <label>Building (optional)</label>
            <input id="fBldg" type="text" placeholder="Building A" />
          </div>
          <div>
            <label>Section (optional, format: A-5)</label>
            <input id="fSect" type="text" placeholder="A-5" />
          </div>
        </div>

        <button class="submit" id="submitSign" type="submit">Sign Out Tool</button>
      </form>
    </section>

    <section id="panelHistory" class="panel hide">
      <h2>Sign-Out History</h2>
      <p class="muted">View and search all tool sign-out records.</p>
      <input id="histSearch" class="search" type="text" placeholder="Search by tool, initials, job number, building, or sectionâ€¦" />
      <div id="histList"><div class="empty">No sign-out records yet</div></div>
    </section>

    <section id="toolList" class="cards"></section>

    <template id="toolCardTmpl">
      <article class="card">
        <header class="card-head">
          <strong class="tool-name"></strong>
          <span class="status">Available</span>
        </header>
        <div class="body">
          <div>Category: <span class="tool-category">â€”</span></div>
          <div>Condition: <span class="tool-condition">â€”</span></div>
          <div>Job: <span class="tool-job">â€”</span></div>
          <div>By: <span class="tool-by">â€”</span></div>
        </div>
        <div class="actions">
          <button class="btn edit" type="button">Edit</button>
          <button class="btn checkout" type="button">Check out</button>
          <button class="btn checkin" type="button">Check in</button>
          <button class="btn archive" type="button">Archive</button>
          <button class="btn primary qr-show" type="button">QR</button>
          <button class="btn warn rfid-bind" type="button">Bind RFID</button>
          <label class="turned-in">Turned in today <input type="checkbox" class="turned-in-toggle" /></label>
        </div>
      </article>
    </template>
  </div>

  <dialog id="qrDialog">
    <h3 id="qrDialogTitle">Tool QR</h3>
    <div id="qrCanvasWrap" class="qr-box"></div>
    <button id="qrCloseBtn" class="btn" type="button">Close</button>
  </dialog>

  <dialog id="scanDialog">
    <h3>Scan QR Code</h3>
    <video id="scanVideo" playsinline class="scan-video"></video>
    <canvas id="scanCanvas" class="scan-canvas"></canvas>
    <div id="scanStatus" class="scan-status"></div>
    <button id="scanCloseBtn" class="btn" type="button">Close</button>
  </dialog>

  <script defer src="https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script defer src="https://unpkg.com/jsqr@1.4.0/dist/jsQR.js"></script>
  <script defer src="app.js"></script>
</body>
</html>
